const RATE_EUR=1.95583,REGEX=/(?:лв\.?|BGN)(?:\s*|&nbsp;|\u00A0)?(\d+(?:[.,]\d{0,2})?)|(\d+(?:[.,]\d{0,2})?)|(\d(?: ['\u00A0,&nbsp;]\d)*(?:[.,]\d{2}))(?:\s*|&nbsp;|\u00A0)?(лв\.?|BGN)/g,DIGIT_REGEX=/^\d+(?:[.,]\d+)?$/;function convertPriceText(t){let e=[...t.matchAll(REGEX)];if(!e||0===e.length)return;let o=null;if(1===e.length?(e[0][0]&&e[0][0].match(DIGIT_REGEX)&&(o=e[0][0]),e[0][1]&&e[0][1].match(DIGIT_REGEX)&&(o=e[0][1]),e[0][2]&&e[0][2].match(DIGIT_REGEX)&&(o=e[0][2])):e[0][0]&&e[0][0].match(DIGIT_REGEX)&&e[1][0]&&e[1][0].match(DIGIT_REGEX)?o=e[0][0]+e[1][0]:e[0][1]&&e[1][0]&&e[1][0].match(DIGIT_REGEX)&&(o=e[0][1].replace(",","").replace(" ","")+e[1][0]),!o)return;let a=parseFloat(o.replace(",","."));if(!isNaN(a))return(a/1.95583).toFixed(2).replace(".",",")}function appendEUR(t,e,o,a){if(t.querySelector(".eur-price"))return;let r=document.createElement("span");r.className="eur-price",r.textContent=`/ ${e} €`,r.style.cssText=`
    font-size: ${a||"1em"};
    color: ${o||"FFFFFF"};
    margin-left: 6px;
    white-space: nowrap;
  `,t.appendChild(r)}function convertWithInnerText(t){t.forEach(t=>{let e=document.querySelectorAll(t);e.forEach(t=>{if(NotIncludesLeva(t)||t.innerText.includes("€"))return;let e=convertPriceText(t.innerText);e&&(t.innerText+=`/ ${e} €`)})})}function convertWithAppending(t){t.forEach(t=>{let e=document.querySelectorAll(t);e.forEach(t=>{if(NotIncludesLeva(t)||t.querySelector(".eur-price"))return;let e=convertPriceText(t.innerText);e&&appendEUR(t,e,t.style.color,t.style.fontSize)})})}function NotIncludesLeva(t){return!t.innerText.includes("лв")&&!t.innerText.startsWith("BGN")&&!t.innerText.endsWith("BGN")}function convertCategoryPrices(){convertWithAppending(['[data-hook="product-item-price-to-pay"]','[data-hook="formatted-primary-price"]','[data-hook="challenge-pricing"]'])}function convertProductPagePrice(){let t=document.querySelectorAll('div[data-testid="richTextElement"]');t.forEach(t=>{let e=t.querySelector("p, h2, span, div");if(!e||NotIncludesLeva(e)||e.querySelector(".eur-price"))return;let o=convertPriceText(e.innerText);o&&appendEUR(e,o)})}function convertCartTotals(){convertWithAppending(['[data-hook="SubTotals.subtotalText"]','[data-hook="Total.formattedValue"]','[data-hook="TotalShipping.estimatedShipping"]','dd[data-hook="SubTotals.subtotalText"]','dd[data-hook="Total.formattedValue"]','dd[data-hook="TotalShipping.estimatedShipping"]'])}function convertSideCartPrices(){convertWithAppending(['[data-hook="CartItemDataHook.price"]','[data-hook="CartItemDataHook.totalPrice"] div','[data-hook="Footer.subtotalValue"]','[data-hook="cart-widget-item-price"]','[data-hook="cart-widget-total"]'])}function convertCheckoutSummaryPrices(){convertWithInnerText(['[data-hook="FoldableSummarySectionDataHook.total"]','[data-hook="LineItemDataHooks.Price"]','[data-hook="total-row-value"] span','[data-hook="payment-checkout-summary-plan-price"]'])}function convertThankYouPrices(){convertWithInnerText(['[data-hook="ProductLineItemDataHook.totalPrice"]','[data-hook="subtotal-row-value"]','[data-hook="total-row-value"]','[data-hook="challenge-pricing"]'])}function convertFilter(){convertWithInnerText(['[data-hook="filter-type-PRICE "] span'])}function convertShipping(){convertWithAppending(['[data-hook="dropdown-option"]'])}function convertMembers(){convertWithInnerText(['[data-hook="subtotal"]','[data-hook="shipping"]','[data-hook="tax-0"]','[data-hook="total"]','[data-hook="product-total"]','[data-hook="product-price"]','[data-hook="value"]'])}function convertAllPrices(){convertCategoryPrices(),convertProductPagePrice(),convertCartTotals(),convertSideCartPrices(),convertCheckoutSummaryPrices(),convertThankYouPrices(),convertFilter()}window.addEventListener("load",()=>{setTimeout(()=>{setInterval(()=>{convertAllPrices()},200)},150)});
